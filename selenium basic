import java.io.File;
import java.io.IOException;
import java.time.Duration;
import java.util.Iterator;
import java.util.Set;

import org.openqa.selenium.JavascriptExecutor;
import org.openqa.selenium.Keys;
import org.openqa.selenium.OutputType;
import org.openqa.selenium.TakesScreenshot;
import org.openqa.selenium.WebDriver;
import org.openqa.selenium.chrome.ChromeDriver;
import org.openqa.selenium.chrome.ChromeOptions;
import org.openqa.selenium.interactions.Actions;
import org.openqa.selenium.support.ui.ExpectedConditions;
import org.openqa.selenium.support.ui.WebDriverWait;
import org.testng.annotations.Test;

import com.google.common.io.Files;

public class ST {
@Test
public void testFirst() throws InterruptedException, IOException 
{   ChromeOptions option = new ChromeOptions();
    option.setAcceptInsecureCerts(true);  //   to accept certificates proxy too
	/*
	 * Proxy proxy = new Proxy(); String p = proxy.getHttpProxy();
	 * option.setProxy(proxy);
	 */
    
    WebDriver driver= new  ChromeDriver(option);
    
    driver.manage().timeouts().implicitlyWait(Duration.ofSeconds(10));
    WebDriverWait wait = new WebDriverWait(driver,Duration.ofSeconds(5));
    wait.until(ExpectedConditions.titleIs(null));
    Thread.sleep(4000);
   
    driver.manage().deleteAllCookies();
    driver.get("");
    driver.manage().window().maximize();

    
    driver.switchTo().frame(0);
    driver.switchTo().defaultContent();
   
    driver.switchTo().alert().accept();
    driver.switchTo().alert().dismiss();
   
    Actions ac = new Actions(driver);
    ac.moveToElement(null).keyDown(Keys.CONTROL).click().build().perform();
    
    Set<String> window = driver.getWindowHandles();
    Iterator<String> it = window.iterator();
    String parentWindow = it.next();
    String childWindow = it.next();
    driver.switchTo().window(childWindow);
    driver.switchTo().window(parentWindow);
    
    JavascriptExecutor js=  (JavascriptExecutor)driver;
    js.executeScript("window.scrollBy(0,500)","");
    
    File src = ((TakesScreenshot)driver).getScreenshotAs(OutputType.FILE);
    Files.copy(src, new File("./SeleniumScreenshots/Screen.png"));
    
}
}
